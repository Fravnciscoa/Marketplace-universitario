// ============================================
// Variables Globales (mismas que en home)
// ============================================

$font-stack: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
  Ubuntu, 'Helvetica Neue', Helvetica, Arial, sans-serif;

$colors: (
  primary: #003366,
  primary-light: #0066cc,
  primary-dark: #001a33,
  secondary: #f0f4f8,
  accent: #ffb400,
  text: #ffffff,
  text-dark: #000000,
  text-muted: #555555,
  text-light: #666666,
  bg: #f5f5f5,
  bg-hero: #3d3d7a,
  card: #ffffff,
  border: #e0e0e0,
  success: #28a745,
  warning: #ffc107,
  danger: #dc3545,
);

$spacing: (
  xs: 4px,
  sm: 8px,
  md: 16px,
  lg: 24px,
  xl: 32px,
  xxl: 40px,
  xxxl: 48px,
);

$font-sizes: (
  xs: 12px,
  sm: 14px,
  base: 16px,
  lg: 18px,
  xl: 20px,
  xxl: 24px,
  xxxl: 28px,
  hero: 36px,
);

$breakpoints: (
  mobile: 576px,
  tablet: 768px,
  desktop: 992px,
  wide: 1200px,
);

// ============================================
// Mixins
// ============================================

@mixin mobile {
  @media (max-width: map-get($breakpoints, mobile)) {
    @content;
  }
}

@mixin tablet {
  @media (max-width: map-get($breakpoints, tablet)) {
    @content;
  }
}

@mixin desktop {
  @media (min-width: map-get($breakpoints, desktop)) {
    @content;
  }
}

@mixin card-shadow {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

@mixin transition($property: all) {
  transition: $property 0.3s ease;
}

// ============================================
// Reset y Base
// ============================================

* {
  box-sizing: border-box;
}

ion-content {
  --background: #{map-get($colors, bg)};
  font-family: $font-stack;
}

// ============================================
// Header (copiado de home)
// ============================================

.header-toolbar {
  --background: #{map-get($colors, primary)};
  --color: #{map-get($colors, text)};
  --border-width: 0;
  padding: 0;
}

.header-container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: map-get($spacing, md) map-get($spacing, xxl);
  max-width: 1400px;
  margin: 0 auto;
  width: 100%;

  @include tablet {
    padding: map-get($spacing, md);
    flex-wrap: wrap;
  }
}

.header-logo {
  display: flex;
  align-items: center;
  gap: map-get($spacing, md);

  img {
    width: 48px;
    height: 48px;
    object-fit: contain;

    @include mobile {
      width: 40px;
      height: 40px;
    }
  }
}

.header-logo-text {
  font-size: map-get($font-sizes, xl);
  font-weight: 700;
  color: map-get($colors, text);
  letter-spacing: -0.5px;

  @include mobile {
    font-size: map-get($font-sizes, lg);
  }
}

.header-nav {
  display: flex;
  gap: map-get($spacing, xl);
  align-items: center;

  @include tablet {
    width: 100%;
    order: 3;
    margin-top: map-get($spacing, md);
    gap: map-get($spacing, md);
    overflow-x: auto;
  }
}

.nav-link {
  color: map-get($colors, text);
  font-size: map-get($font-sizes, base);
  font-weight: 500;
  text-decoration: none;
  padding: map-get($spacing, sm) 0;
  border-bottom: 2px solid transparent;
  @include transition(border-color);
  white-space: nowrap;

  &:hover {
    border-bottom-color: map-get($colors, accent);
  }

  &--active {
    border-bottom-color: map-get($colors, accent);
    font-weight: 600;
  }

  @include mobile {
    font-size: map-get($font-sizes, sm);
  }
}

.header-actions {
  display: flex;
  gap: map-get($spacing, md);
  align-items: center;

  @include tablet {
    margin-left: auto;
  }
}

.btn-auth {
  font-weight: 600;
  text-transform: none;
  font-size: map-get($font-sizes, sm);
  height: 40px;

  @include mobile {
    font-size: 12px;
    height: 36px;
    --padding-start: 12px;
    --padding-end: 12px;
  }
}

.btn-login {
  --color: #{map-get($colors, text)};

  &:hover {
    opacity: 0.8;
  }
}

.btn-register {
  --background: #{map-get($colors, accent)};
  --color: #{map-get($colors, text-dark)};
  --border-radius: 8px;

  &:hover {
    --background: #{darken(#ffb400, 10%)};
  }
}

.btn-logout {
  --background: #{map-get($colors, danger)};
  --color: #{map-get($colors, text)};
  --border-radius: 8px;

  &:hover {
    --background: #{darken(#dc3545, 10%)};
  }
}

// ============================================
// Layout principal Categorías
// ============================================

.main-container.categorias-main {
  max-width: 1200px;
  margin: map-get($spacing, lg) auto map-get($spacing, xxxl);
  padding: 0 map-get($spacing, xxl);

  @include tablet {
    padding: 0 map-get($spacing, lg);
  }

  @include mobile {
    padding: 0 map-get($spacing, md);
  }
}

.categorias-header {
  margin-bottom: map-get($spacing, lg);

  h1 {
    margin: 0;
    font-size: map-get($font-sizes, xxxl);
    color: map-get($colors, primary-dark);
  }

  p {
    margin-top: map-get($spacing, xs);
    font-size: map-get($font-sizes, base);
    color: map-get($colors, text-light);
  }
}

// ============================================
// Cards de categorías
// ============================================

.categorias-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: map-get($spacing, lg);
}

.categoria-card {
  background: map-get($colors, card);
  border-radius: 12px;
  padding: map-get($spacing, lg);
  border: 1px solid map-get($colors, border);
  @include card-shadow;
  display: flex;
  flex-direction: column;
  gap: map-get($spacing, md);
}

.categoria-header {
  display: flex;
  align-items: center;
  gap: map-get($spacing, md);
}

.categoria-icon-wrapper {
  width: 44px;
  height: 44px;
  border-radius: 999px;
  background: map-get($colors, secondary);
  display: flex;
  align-items: center;
  justify-content: center;

  ion-icon {
    font-size: 24px;
    color: map-get($colors, primary-light);
  }
}

.categoria-text {
  h2 {
    margin: 0;
    font-size: map-get($font-sizes, xl);
    color: map-get($colors, primary-dark);
  }

  .categoria-descripcion {
    margin: map-get($spacing, xs) 0 0;
    font-size: map-get($font-sizes, sm);
    color: map-get($colors, text-light);
  }
}

// ============================================
// Lista de productos dentro de la categoría
// ============================================

.categoria-productos-list {
  background: transparent;
  padding: 0;
}

.categoria-producto-item {
  --background: transparent;
  --padding-start: 0;
  --inner-padding-end: 0;
  --min-height: 40px;
  padding: map-get($spacing, xs) 0;

  ion-label {
    margin-right: map-get($spacing, md);
  }
}

.producto-nombre {
  font-size: map-get($font-sizes, base);
  font-weight: 600;
  color: map-get($colors, text-dark);
  margin: 0;
}

.producto-descripcion {
  font-size: map-get($font-sizes, xs);
  color: map-get($colors, text-light);
  margin: 2px 0 0;
}

.producto-precio-wrapper {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
  white-space: nowrap;
}

.producto-precio {
  font-size: map-get($font-sizes, sm);
  font-weight: 700;
  color: map-get($colors, primary);
}

.producto-campus {
  font-size: map-get($font-sizes, xs);
  color: map-get($colors, text-muted);
}

.categoria-sin-productos {
  font-size: map-get($font-sizes, xs);
  color: map-get($colors, text-muted);
  padding: map-get($spacing, xs) 0;
}

// ============================================
// Botón "Ver todos"
// ============================================

.categoria-ver-mas-btn {
  align-self: flex-start;
  margin-top: map-get($spacing, xs);
  padding: 6px 14px;
  border-radius: 999px;
  border: 1px solid map-get($colors, primary-light);
  background: map-get($colors, secondary);
  color: map-get($colors, primary-dark);
  font-size: map-get($font-sizes, xs);
  font-weight: 600;
  cursor: pointer;
  @include transition(background);

  &:hover {
    background: lighten(map-get($colors, secondary), 5%);
  }
}
