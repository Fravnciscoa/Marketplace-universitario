<ion-header>
  <ion-toolbar class="header-toolbar">
    <div class="header-container">
      <div class="header-logo">
        <a routerLink="/home">
          <img src="assets/icon/Escudo_PUCV-2016__Perfil Redes TW_FB.png" alt="PUCV Logo" style="height:40px; cursor:pointer;" />
        </a>
        <a routerLink="/home" style="text-decoration:none; color:inherit;">
          <span class="header-logo-text" style="cursor:pointer;">MarketPUCV</span>
        </a>
      </div>

      <nav class="header-nav">
        <a routerLink="/home" class="nav-link">Inicio</a>
        <a routerLink="/categorias" class="nav-link">Categorías</a>
        <a routerLink="/mis-publicaciones" class="nav-link">Mis publicaciones</a>
        <a routerLink="/ayuda" class="nav-link">Ayuda</a>
      </nav>

      <div class="header-actions">
        <ion-button class="btn-auth btn-login" fill="clear">
          Iniciar sesión
        </ion-button>
        <ion-button class="btn-auth btn-register" fill="solid">
          Registrarse
        </ion-button>
      </div>
    </div>
  </ion-toolbar>
</ion-header>


<ion-content>
  <div class="detalle-wrapper">
    <!-- Columna izquierda: Imagen principal -->
    <div class="producto-imagen-section">
      <ion-card class="imagen-card">
        <div class="imagen-principal-container">
          <img [src]="producto.imagen" [alt]="producto.titulo" />
        </div>
      </ion-card>
    </div>

    <!-- Columna central: Información del producto -->
    <div class="producto-info-section">
      <!-- Precio destacado -->
      <ion-card class="precio-card">
        <ion-card-content>
          <h1 class="producto-precio-principal">{{ formatearPrecio(producto.precio) }}</h1>
        </ion-card-content>
      </ion-card>

      <!-- Descripción principal -->
      <ion-card class="info-card">
        <ion-card-content>
          <h2 class="producto-titulo-principal">{{ producto.titulo }}</h2>
          <div class="producto-detalles-rapidos">
            <span class="detalle-item"><strong>Uso:</strong> {{ producto.uso }}</span>
            <span class="detalle-item"><strong>Campus:</strong> {{ producto.campus }}</span>
          </div>
          <p class="producto-descripcion-principal">{{ producto.descripcion }}</p>
          <p class="precio-conversable" *ngIf="producto.precioConversable">
            <strong>Precio conversable</strong>
          </p>
        </ion-card-content>
      </ion-card>

      <!-- Información adicional -->
      <ion-card class="info-card">
        <ion-card-header>
          <ion-card-title class="info-titulo">Información adicional</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <div class="info-detalle-grid">
            <div class="info-item" *ngFor="let item of producto.informacionAdicional">
              <strong>{{ item.label }}:</strong> {{ item.valor }}
            </div>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Botones de acción -->
      <div class="acciones-producto">
        <ion-button expand="block" color="dark" class="btn-accion btn-carrito">
          <ion-icon name="cart-outline" slot="start"></ion-icon>
          Añadir al carrito
        </ion-button>
        <ion-button expand="block" class="btn-accion btn-comprar">
          Comprar ahora
        </ion-button>
      </div>
    </div>

    <!-- Columna derecha: Vendedor y productos relacionados -->
    <div class="sidebar-section">
      <!-- Info del vendedor -->
      <ion-card class="vendedor-card">
        <ion-card-content>
          <div class="vendedor-perfil">
            <div class="vendedor-avatar">
              <ion-icon name="person"></ion-icon>
            </div>
            <h3 class="vendedor-nombre">Vendedor</h3>
            <p class="vendedor-nombre-real">{{ producto.vendedor }}</p>
          </div>
          
          <div class="vendedor-contacto">
            <div class="contacto-item">
              <ion-icon name="call-outline"></ion-icon>
              <span>{{ producto.telefono }}</span>
            </div>
            <div class="contacto-item">
              <ion-icon name="mail-outline"></ion-icon>
              <span>{{ producto.email }}</span>
            </div>
          </div>
        </ion-card-content>
      </ion-card>

     <!-- Reseñas -->
<ion-card class="resenas-card">
  <ion-card-header>
    <ion-card-title class="resenas-titulo">Reseñas</ion-card-title>
  </ion-card-header>
  <ion-card-content>
    <div class="resena-item" *ngFor="let resena of resenas">
      <div class="resena-header">
        <span class="resena-usuario">{{ resena.usuario }}</span>
      </div>
      <p class="resena-texto">"{{ resena.comentario }}"</p>
    </div>
  </ion-card-content>
</ion-card>



      <!-- Productos relacionados -->
      <div class="relacionados-section">
        <h3 class="relacionados-titulo">Productos relacionados</h3>
        <ion-card 
          class="producto-relacionado-card" 
          *ngFor="let relacionado of productosRelacionados"
          [routerLink]="['/detalle-producto', relacionado.id]">
          <img [src]="relacionado.imagen" [alt]="relacionado.titulo" />
          <ion-card-content>
            <h4 class="relacionado-titulo">{{ relacionado.titulo }}</h4>
            <p class="relacionado-precio">{{ formatearPrecio(relacionado.precio) }}</p>
            <p class="relacionado-descripcion">{{ relacionado.descripcionCorta }}</p>
          </ion-card-content>
        </ion-card>
      </div>
    </div>
  </div>
</ion-content>
