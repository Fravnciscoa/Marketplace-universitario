<ion-header class="site-header">
  <ion-toolbar class="site-toolbar">
    <div class="brand">
      <img src="assets/escudo-pucv.png" alt="PUCV" class="logo" />
      <span class="name">MarketPUCV</span>
    </div>

    <nav class="main-nav">
      <a href="#">Inicio</a>
      <a href="#">Categor√≠as</a>
      <a href="#">Mis publicaciones</a>
      <a href="#">Ayuda</a>
    </nav>

    <ion-buttons slot="end" class="auth">
      <ion-button size="small" fill="outline">
        <ion-icon slot="start" name="log-in-outline"></ion-icon> Iniciar sesi√≥n
      </ion-button>
      <ion-button size="small" class="btn-cta">
        <ion-icon slot="start" name="person-add-outline"></ion-icon> Registrarse
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen>
  <!-- HERO -->
  <section class="hero">
    <div class="hero-left">
      <img src="assets/hero-marketpucv.png" alt="Marketplace Universitario" />
    </div>
    <div class="hero-right">
      <div class="search-wrap">
        <ion-button fill="clear" class="funnel">
          <ion-icon name="funnel-outline"></ion-icon>
        </ion-button>
        <ion-searchbar
          placeholder="¬øQu√© est√°s buscando?"
          (ionInput)="onSearch($event)"
        ></ion-searchbar>
        <ion-button fill="clear" class="glass">
          <ion-icon name="search-outline"></ion-icon>
        </ion-button>
      </div>
    </div>
  </section>

  <div class="page-wrap">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <h3>Secci√≥n filtros</h3>

      <ion-list class="filter-card">
        <ion-item lines="none"><strong>Tipo de servicio</strong></ion-item>
        <ion-item lines="none">
          <ion-checkbox labelPlacement="end">Comprar</ion-checkbox>
        </ion-item>
        <ion-item lines="none">
          <ion-checkbox labelPlacement="end">Reservar</ion-checkbox>
        </ion-item>
      </ion-list>

      <ion-list class="filter-card">
        <ion-item lines="none"><strong>Categor√≠as</strong></ion-item>
        <ion-item lines="none">
          <ion-checkbox
            [checked]="cats()['Libros']"
            (ionChange)="toggleCat('Libros', $event.detail.checked)"
            labelPlacement="end"
            >Libros</ion-checkbox
          >
        </ion-item>
        <ion-item lines="none">
          <ion-checkbox
            [checked]="cats()['Electr√≥nica']"
            (ionChange)="toggleCat('Electr√≥nica', $event.detail.checked)"
            labelPlacement="end"
            >Electr√≥nica</ion-checkbox
          >
        </ion-item>
        <ion-item lines="none">
          <ion-checkbox
            [checked]="cats()['Deportes']"
            (ionChange)="toggleCat('Deportes', $event.detail.checked)"
            labelPlacement="end"
            >Deportes</ion-checkbox
          >
        </ion-item>
      </ion-list>

      <ion-list class="filter-card">
        <ion-item lines="none">
          <strong>Precio</strong>
          <ion-icon name="pricetag-outline" slot="end"></ion-icon>
        </ion-item>
        <div class="price-range">
          <ion-range
            [dualKnobs]="true"
            [min]="0"
            [max]="500000"
            [pin]="true"
            [value]="{lower: minPrecio(), upper: maxPrecio()}"
            (ionChange)="onPrecioRange($event)"
          ></ion-range>
          <div class="price-labels">
            <span>${{ minPrecio() | number:'1.0-0' }}</span>
            <span>${{ maxPrecio() | number:'1.0-0' }}</span>
          </div>
        </div>
      </ion-list>

      <ion-list class="filter-card">
        <ion-item lines="none"><strong>Campus</strong></ion-item>
        <ion-item lines="none">
          <ion-checkbox
            [checked]="campus()['Isabel Brown Cases']"
            (ionChange)="toggleCampus('Isabel Brown Cases', $event.detail.checked)"
            labelPlacement="end"
          >
            Isabel Brown Cases
          </ion-checkbox>
        </ion-item>
        <ion-item lines="none">
          <ion-checkbox
            [checked]="campus()['Casa Central']"
            (ionChange)="toggleCampus('Casa Central', $event.detail.checked)"
            labelPlacement="end"
          >
            Casa Central
          </ion-checkbox>
        </ion-item>
        <ion-item lines="none">
          <ion-checkbox
            [checked]="campus()['Curauma']"
            (ionChange)="toggleCampus('Curauma', $event.detail.checked)"
            labelPlacement="end"
          >
            Curauma
          </ion-checkbox>
        </ion-item>
      </ion-list>
    </aside>

    <!-- GRID -->
    <main class="grid-wrap">
      <ion-grid class="cards">
        <ion-row>
          <ion-col
            size="12"
            size-md="6"
            size-lg="4"
            size-xl="3"
            *ngFor="let p of visibles(); trackBy: trackById"
          >
            <ion-card class="product-card">
              <div class="thumb">
                <img [src]="p.img" [alt]="p.titulo" />
              </div>
              <ion-card-header>
                <ion-card-title>{{ p.titulo }}</ion-card-title>
                <ion-card-subtitle>
                  {{ p.precio > 0 ? ('$' + (p.precio | number:'1.0-0')) :
                  'Gratis' }}
                </ion-card-subtitle>
              </ion-card-header>
              <ion-card-content>Body text.</ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </main>
  </div>

  <!-- vac√≠o -->
  <div class="empty" *ngIf="!visibles().length">
    No encontramos resultados para tu b√∫squeda ü§∑‚Äç‚ôÇÔ∏è
  </div>
</ion-content>
